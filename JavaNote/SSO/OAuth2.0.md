# OAuth2.0

> OAuth 2.0授权框架支持第三方 应用程序获取对HTTP服务的有限访问，通过编排审批交互来代表资源所有者资源所有者和HTTP服务之间，或通过允许第三方应用程序以自己的名义获取访问

## OAuth 2 有四种授权模式:

1. 授权码模式（authorization code）
2. 简化模式（implicit）
3. 密码模式（resource owner password credentials）
4. 客户端模式（client credentials）



### 授权码模式（authorization code）

实例: 微信登录、用 QQ 登录、用微博登录、用 Google 账号登录、用 github 授权登录

实践1:利用第三方的权威平台(QQ、微信、微博)实现用户身份的认证,自己服务不需要存储用户的密码，只要存储认证平台返回的唯一ID 和用户信息即可

实践2: 公司内部多个服务,专门独立一个认证中心,进行授权码登录,其他所有的服务都要到这个认证中心做认证



#### 流程步骤:

![image-20230607121737547](C:\Users\96538\AppData\Roaming\Typora\typora-user-images\image-20230607121737547.png)

- (A) 用户访问客户端，客户端将用户重定向到认证服务器；
- (B) 用户选择是否授权；
- (C) 如果用户同意授权，认证服务器重定向到客户端事先指定的地址，而且带上授权码(code)；
- (D) 客户端收到授权码，带着前面的重定向地址，向认证服务器申请访问令牌；
- (E) 认证服务器核对授权码与重定向地址，确认后向客户端发送访问令牌和更新令牌(可选)。

| 参数名称      | 参数含义                                                     | 是否必须 |
| ------------- | ------------------------------------------------------------ | -------- |
| response_type | 授权类型，一般为`code`                                       | 必须     |
| client_id     | 客户端ID，客户端到资源服务器注册的ID                         | 必须     |
| redirect_uri  | 重定向URI                                                    | 可选     |
| scope         | 申请的权限范围，多个逗号隔开                                 | 可选     |
| state         | 客户端的当前状态，可以指定任意值，认证服务器会原封不动的返回这个值 | 推荐     |





### 简化模式（implicit）

